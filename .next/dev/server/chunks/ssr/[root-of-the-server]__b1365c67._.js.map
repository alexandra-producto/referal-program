{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/usuario/Referal%20MVP/app/lib/adminStore.ts"],"sourcesContent":["/**\n * Simple admin store using localStorage for simulated login\n */\n\nconst ADMIN_STORAGE_KEY = 'admin_auth';\n\nexport const adminStore = {\n  /**\n   * Check if admin is logged in\n   */\n  isAuthenticated(): boolean {\n    if (typeof window === 'undefined') return false;\n    return localStorage.getItem(ADMIN_STORAGE_KEY) === 'true';\n  },\n\n  /**\n   * Set admin as logged in\n   */\n  login(): void {\n    if (typeof window === 'undefined') return;\n    localStorage.setItem(ADMIN_STORAGE_KEY, 'true');\n  },\n\n  /**\n   * Clear admin session\n   */\n  logout(): void {\n    if (typeof window === 'undefined') return;\n    localStorage.removeItem(ADMIN_STORAGE_KEY);\n  },\n};\n\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AAED,MAAM,oBAAoB;AAEnB,MAAM,aAAa;IACxB;;GAEC,GACD;QACE,wCAAmC,OAAO;;;IAE5C;IAEA;;GAEC,GACD;QACE,wCAAmC;;;IAErC;IAEA;;GAEC,GACD;QACE,wCAAmC;;;IAErC;AACF"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/usuario/Referal%20MVP/app/admin/solicitudes/%5Bid%5D/recomendaciones/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, use } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\nimport { ArrowLeft, Building, MapPin, Send, CheckCircle2, HelpCircle } from \"lucide-react\";\nimport { Button } from \"../../../../components/ui/button\";\nimport { Card } from \"../../../../components/ui/card\";\nimport { ProductLatamLogo } from \"../../../../components/ProductLatamLogo\";\nimport { adminStore } from \"@/app/lib/adminStore\";\nimport { ImageWithFallback } from \"../../../../components/ImageWithFallback\";\n\ninterface Candidate {\n  id: string;\n  full_name: string;\n  current_company: string | null;\n  current_job_title: string | null;\n  email: string | null;\n  linkedin_url: string | null;\n}\n\ninterface Hyperconnector {\n  id: string;\n  full_name: string;\n  email: string | null;\n}\n\ninterface Recommendation {\n  id: string;\n  job_id: string;\n  candidate_id: string | null;\n  hyperconnector_id: string;\n  notes: string | null;\n  status: string;\n  created_at: string;\n  candidate: Candidate | null;\n  hyperconnector: Hyperconnector | null;\n  linkedin_url?: string | null;\n  match_score: number | null; // Match score de job_candidate_matches\n}\n\ninterface Job {\n  id: string;\n  job_title: string;\n  description: string | null;\n  company_name: string;\n}\n\nexport default function RecomendacionesPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id: jobId } = use(params);\n  const router = useRouter();\n  const [loading, setLoading] = useState(true);\n  const [job, setJob] = useState<Job | null>(null);\n  const [recommendations, setRecommendations] = useState<Recommendation[]>([]);\n\n  useEffect(() => {\n    // Verificar autenticación\n    if (!adminStore.isAuthenticated()) {\n      router.push(\"/solicitante/login-simulado\");\n      return;\n    }\n\n    fetchData();\n  }, [jobId, router]);\n\n  const fetchData = async () => {\n    try {\n      // Obtener job\n      const jobResponse = await fetch(`/api/jobs/${jobId}`);\n      if (jobResponse.ok) {\n        const jobData = await jobResponse.json();\n        setJob(jobData.job || jobData);\n      }\n\n      // Obtener recomendaciones\n      const recResponse = await fetch(`/api/jobs/${jobId}/recommendations`);\n      if (!recResponse.ok) {\n        throw new Error(\"Error al cargar las recomendaciones\");\n      }\n      const recData = await recResponse.json();\n      setRecommendations(recData.recommendations || []);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now.getTime() - date.getTime());\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n\n    if (diffDays === 0) {\n      return \"Hoy\";\n    } else if (diffDays === 1) {\n      return \"Hace 1 día\";\n    } else {\n      return `Hace ${diffDays} días`;\n    }\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(\" \")\n      .map((n) => n[0])\n      .join(\"\")\n      .toUpperCase()\n      .substring(0, 2);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-b from-blue-100 via-purple-100 to-indigo-200\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-700\">Cargando...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-100 via-purple-100 to-indigo-200 px-4 py-8\">\n      <div className=\"max-w-5xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between\">\n          <Button\n            onClick={() => router.push(\"/admin/solicitudes\")}\n            variant=\"outline\"\n            className=\"bg-blue-50 border-blue-300 text-gray-800 rounded-xl flex items-center gap-2\"\n          >\n            <ArrowLeft className=\"h-4 w-4\" />\n            Volver a Solicitudes\n          </Button>\n        </div>\n\n        {/* Job Info */}\n        {job && (\n          <Card className=\"bg-blue-50/60 backdrop-blur-sm border border-blue-200 rounded-3xl p-6\">\n            <h2 className=\"text-gray-800 text-2xl font-bold mb-2\">{job.job_title}</h2>\n            {job.description && (\n              <p className=\"text-gray-700 mb-4\">{job.description}</p>\n            )}\n            <div className=\"flex items-center gap-4 text-gray-600\">\n              <div className=\"flex items-center gap-2\">\n                <Building className=\"h-4 w-4\" />\n                <span>{job.company_name}</span>\n              </div>\n            </div>\n          </Card>\n        )}\n\n        {/* Recommendations Header */}\n        <div className=\"flex items-center gap-2\">\n          <CheckCircle2 className=\"h-5 w-5 text-green-600\" />\n          <h2 className=\"text-gray-800 text-2xl font-bold\">\n            {recommendations.length} Recomendaciones\n          </h2>\n        </div>\n\n        {/* Recommendations List */}\n        {recommendations.length === 0 ? (\n          <Card className=\"bg-blue-50/60 backdrop-blur-sm border border-blue-200 rounded-3xl p-12 text-center\">\n            <p className=\"text-gray-700 text-lg\">\n              No hay recomendaciones para este job aún.\n            </p>\n          </Card>\n        ) : (\n          <div className=\"space-y-6\">\n            {recommendations.map((rec, index) => (\n              <motion.div\n                key={rec.id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ duration: 0.3, delay: index * 0.1 }}\n              >\n                <Card className=\"bg-gray-50 border border-gray-200 rounded-3xl p-6\">\n                  {/* Candidate Header */}\n                  <div className=\"flex items-start gap-6 mb-6\">\n                    {/* Avatar */}\n                    <div className=\"flex-shrink-0\">\n                      {rec.candidate ? (\n                        <ImageWithFallback\n                          src={null}\n                          alt={rec.candidate.full_name}\n                          className=\"w-20 h-20 rounded-2xl object-cover ring-2 ring-blue-200 shadow-md\"\n                        />\n                      ) : (\n                        <div className=\"w-20 h-20 rounded-2xl bg-blue-500 flex items-center justify-center text-white text-2xl font-bold\">\n                          {rec.linkedin_url ? \"L\" : \"?\"}\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Candidate Info */}\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-start justify-between mb-3\">\n                        <div>\n                          <h3 className=\"text-gray-800 text-2xl font-bold mb-1\">\n                            {rec.candidate?.full_name || \"Candidato de LinkedIn\"}\n                          </h3>\n                          {rec.candidate?.current_job_title && (\n                            <p className=\"text-gray-700 text-lg mb-2\">\n                              {rec.candidate.current_job_title}\n                              {rec.candidate.current_company && ` • ${rec.candidate.current_company}`}\n                            </p>\n                          )}\n                          {rec.linkedin_url && !rec.candidate && (\n                            <p className=\"text-gray-600 text-sm mb-2\">\n                              LinkedIn: {rec.linkedin_url}\n                            </p>\n                          )}\n                        </div>\n                        {rec.match_score !== null && rec.match_score !== undefined && (\n                          <div className=\"flex items-center gap-2 bg-white rounded-xl px-4 py-2 border border-gray-200\">\n                            <div\n                              className={`h-3 w-3 rounded-full ${\n                                rec.match_score >= 90\n                                  ? \"bg-green-500\"\n                                  : rec.match_score >= 75\n                                  ? \"bg-yellow-500\"\n                                  : \"bg-orange-500\"\n                              }`}\n                            />\n                            <span className=\"text-gray-800 font-semibold\">{Math.round(rec.match_score)}%</span>\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"flex flex-wrap items-center gap-4 text-gray-600 text-sm\">\n                        {rec.candidate?.current_company && (\n                          <div className=\"flex items-center gap-2\">\n                            <Building className=\"h-4 w-4\" />\n                            <span>{rec.candidate.current_company}</span>\n                          </div>\n                        )}\n                        {rec.candidate?.email && (\n                          <div className=\"flex items-center gap-2\">\n                            <span>{rec.candidate.email}</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Recommendation Details */}\n                  <div className=\"border-t border-gray-200 pt-6 space-y-4\">\n                    {/* Hyperconnector Info */}\n                    {rec.hyperconnector && (\n                      <div className=\"flex items-center gap-3 mb-4\">\n                        <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-semibold\">\n                          {getInitials(rec.hyperconnector.full_name)}\n                        </div>\n                        <div>\n                          <p className=\"text-gray-800 font-semibold\">\n                            {rec.hyperconnector.full_name}\n                          </p>\n                          <p className=\"text-gray-600 text-sm\">\n                            {formatDate(rec.created_at)}\n                          </p>\n                        </div>\n                      </div>\n                    )}\n\n                    {/* Recommendation Notes */}\n                    {rec.notes && (\n                      <div className=\"bg-white rounded-xl p-4 border border-gray-200\">\n                        <p className=\"text-gray-700 leading-relaxed\">{rec.notes}</p>\n                      </div>\n                    )}\n\n                    {/* Action Button */}\n                    <div className=\"flex justify-end\">\n                      <Button className=\"bg-blue-600 hover:bg-blue-700 text-white rounded-xl flex items-center gap-2\">\n                        <Send className=\"h-4 w-4\" />\n                        Enviar\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Help Button */}\n      <div className=\"fixed bottom-6 right-6\">\n        <Button\n          variant=\"outline\"\n          size=\"icon\"\n          className=\"rounded-full w-12 h-12 bg-gray-800 hover:bg-gray-700 text-white border-gray-700\"\n        >\n          <HelpCircle className=\"h-5 w-5\" />\n        </Button>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}