{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/usuario/Referal%20MVP/src/db/supabaseClient.ts"],"sourcesContent":["import { resolve } from \"path\";\nimport dotenv from \"dotenv\";\nimport { createClient } from \"@supabase/supabase-js\";\n\n// Carga .env.local desde la raíz del proyecto\ndotenv.config({ path: resolve(process.cwd(), \".env.local\") });\n\nconst url = process.env.SUPABASE_URL;\nconst key = process.env.SUPABASE_SERVICE_ROLE_KEY;\n\nif (!url || !key) {\n  console.error(\"SUPABASE_URL:\", url);\n  console.error(\"SUPABASE_SERVICE_ROLE_KEY:\", key);\n  throw new Error(\"❌ Missing SUPABASE_URL or SUPABASE_SERVICE_ROLE_KEY.\");\n}\n\nexport const supabase = createClient(url, key);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,8CAA8C;AAC9C,kKAAM,CAAC,MAAM,CAAC;IAAE,MAAM,IAAA,4GAAO,EAAC,QAAQ,GAAG,IAAI;AAAc;AAE3D,MAAM,MAAM,QAAQ,GAAG,CAAC,YAAY;AACpC,MAAM,MAAM,QAAQ,GAAG,CAAC,yBAAyB;AAEjD,IAAI,CAAC,OAAO,CAAC,KAAK;IAChB,QAAQ,KAAK,CAAC,iBAAiB;IAC/B,QAAQ,KAAK,CAAC,8BAA8B;IAC5C,MAAM,IAAI,MAAM;AAClB;AAEO,MAAM,WAAW,IAAA,yNAAY,EAAC,KAAK"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/usuario/Referal%20MVP/src/domain/candidates.ts"],"sourcesContent":["import { supabase } from \"../db/supabaseClient\";\n\nexport async function getAllCandidates() {\n  const { data, error } = await supabase.from(\"candidates\").select(\"*\");\n  if (error) throw error;\n  return data;\n}\n\nexport async function getCandidateById(id: string) {\n  const { data, error } = await supabase.from(\"candidates\").select(\"*\").eq(\"id\", id).maybeSingle();\n  if (error) throw error;\n  return data;\n}\n\n/**\n * Creates a new candidate and optionally triggers matching with all jobs\n */\nexport async function createCandidate(\n  candidate: any,\n  options?: { triggerMatching?: boolean }\n) {\n  const { data, error } = await supabase\n    .from(\"candidates\")\n    .insert(candidate)\n    .select()\n    .single();\n  \n  if (error) throw error;\n\n  // Trigger matching if requested (non-blocking)\n  if (options?.triggerMatching && data?.id) {\n    // Run asynchronously to not block the insert\n    import(\"../agents/matchJobCandidate\")\n      .then(({ matchCandidateWithAllJobs }) => {\n        matchCandidateWithAllJobs(data.id).catch((err) => {\n          console.error(\"Error in background matching after candidate creation:\", err);\n        });\n      })\n      .catch((err) => {\n        console.error(\"Error loading matching module:\", err);\n      });\n  }\n\n  // Trigger relationship sync (non-blocking)\n  if (data?.id) {\n    import(\"../agents/syncHyperconnectorRelationships\")\n      .then(({ syncHyperconnectorCandidateRelationshipsForCandidate }) => {\n        syncHyperconnectorCandidateRelationshipsForCandidate(data.id).catch((err) => {\n          console.error(\"Error in background relationship sync after candidate creation:\", err);\n        });\n      })\n      .catch((err) => {\n        console.error(\"Error loading relationship sync module:\", err);\n      });\n  }\n\n  return data;\n}\n\nexport async function updateCandidate(id: string, updates: any) {\n  const { data, error } = await supabase.from(\"candidates\").update(updates).eq(\"id\", id).select().single();\n  if (error) throw error;\n  return data;\n}\n\nexport async function deleteCandidate(id: string) {\n  const { error } = await supabase.from(\"candidates\").delete().eq(\"id\", id);\n  if (error) throw error;\n  return true;\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC;IACjE,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,iBAAiB,EAAU;IAC/C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,IAAI,WAAW;IAC9F,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAKO,eAAe,gBACpB,SAAc,EACd,OAAuC;IAEvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CACnC,IAAI,CAAC,cACL,MAAM,CAAC,WACP,MAAM,GACN,MAAM;IAET,IAAI,OAAO,MAAM;IAEjB,+CAA+C;IAC/C,IAAI,SAAS,mBAAmB,MAAM,IAAI;QACxC,6CAA6C;QAC7C,wHACG,IAAI,CAAC,CAAC,EAAE,yBAAyB,EAAE;YAClC,0BAA0B,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC;gBACxC,QAAQ,KAAK,CAAC,0DAA0D;YAC1E;QACF,GACC,KAAK,CAAC,CAAC;YACN,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACJ;IAEA,2CAA2C;IAC3C,IAAI,MAAM,IAAI;QACZ,sIACG,IAAI,CAAC,CAAC,EAAE,oDAAoD,EAAE;YAC7D,qDAAqD,KAAK,EAAE,EAAE,KAAK,CAAC,CAAC;gBACnE,QAAQ,KAAK,CAAC,mEAAmE;YACnF;QACF,GACC,KAAK,CAAC,CAAC;YACN,QAAQ,KAAK,CAAC,2CAA2C;QAC3D;IACJ;IAEA,OAAO;AACT;AAEO,eAAe,gBAAgB,EAAU,EAAE,OAAY;IAC5D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,CAAC,SAAS,EAAE,CAAC,MAAM,IAAI,MAAM,GAAG,MAAM;IACtG,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,gBAAgB,EAAU;IAC9C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,yJAAQ,CAAC,IAAI,CAAC,cAAc,MAAM,GAAG,EAAE,CAAC,MAAM;IACtE,IAAI,OAAO,MAAM;IACjB,OAAO;AACT"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///Users/usuario/Referal%20MVP/app/api/candidates/%5Bid%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { getCandidateById } from '../../../../src/domain/candidates';\n\n/**\n * GET /api/candidates/[id]\n * Obtiene un candidate por su ID\n */\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n\n    const candidate = await getCandidateById(id);\n\n    if (!candidate) {\n      return NextResponse.json(\n        { error: 'Candidate not found' },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json(candidate);\n  } catch (error: any) {\n    console.error('❌ Error fetching candidate:', error);\n    return NextResponse.json(\n      {\n        error: 'Error fetching candidate',\n        details: process.env.NODE_ENV === 'development' ? error.message : undefined,\n      },\n      { status: 500 }\n    );\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,eAAe,IACpB,OAAoB,EACpB,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QAErB,MAAM,YAAY,MAAM,IAAA,iKAAgB,EAAC;QAEzC,IAAI,CAAC,WAAW;YACd,OAAO,gKAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gKAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO,gKAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,uCAAyC,MAAM,OAAO,GAAG;QACpE,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}